<!DOCTYPE html>
<html>
<head>
  <title>CueProjections - Viewer</title>
  <link rel="stylesheet" href="css/style.css">
  <script>
    window.addEventListener("message", (event) => {
      const cueEl = document.getElementById("cueImage");
      if (event.data.blackout !== undefined) {
        cueEl.style.display = event.data.blackout ? "none" : "block";
      }
      if (event.data.cue) {
        const ext = event.data.cue.split('.').pop();
        if (ext === "mp4") {
          cueEl.outerHTML = `<video id="cueImage" src="${event.data.cue}" autoplay loop muted></video>`;
        } else {
          cueEl.outerHTML = `<img id="cueImage" src="${event.data.cue}" alt="Cue Image">`;
        }
      }
    });

    function goFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) elem.requestFullscreen();
      document.getElementById("fsBtn").style.display = "none";
    }
  </script>
</head>
<body class="viewer-body">
  <button id="fsBtn" onclick="goFullscreen()">Fullscreen</button>
  <img id="cueImage" src="" alt="Cue Image">
</body>
</html>
