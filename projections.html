<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Projections</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="main-container">
    <h1>Projections Control</h1>
    <div class="preview-container">
      <div>
        <h3>Current Cue</h3>
        <img id="currentPreview" src="" alt="Current Cue Preview">
      </div>
      <div>
        <h3>Next Cue</h3>
        <img id="nextPreview" src="" alt="Next Cue Preview">
      </div>
    </div>
    <div class="button-group">
      <button id="backBtn">Back</button>
      <button id="goBtn">Go</button>
      <button id="blackoutBtn">Blackout</button>
    </div>
  </div>

  <script>
    const cues = [
      { type: 'blank', src: '' },
      { type: 'image', src: 'assets/show1/cue1.jpg' },
      { type: 'video', src: 'assets/show1/cue2.mp4' },
      // Add more cues as needed
    ];
    let currentCueIndex = 0;
    let blackout = false;

    const currentPreview = document.getElementById('currentPreview');
    const nextPreview = document.getElementById('nextPreview');
    const backBtn = document.getElementById('backBtn');
    const goBtn = document.getElementById('goBtn');
    const blackoutBtn = document.getElementById('blackoutBtn');

    function updatePreviews() {
      const currentCue = cues[currentCueIndex];
      const nextCue = cues[currentCueIndex + 1] || { type: 'blank', src: '' };

      currentPreview.src = currentCue.src;
      nextPreview.src = nextCue.src;

      // Send current cue to viewer
      const viewerWindow = window.open('', 'viewerWindow');
      if (viewerWindow) {
        viewerWindow.postMessage({ cue: currentCue }, '*');
      }
    }

    backBtn.addEventListener('click', () => {
      if (currentCueIndex > 0) {
        currentCueIndex--;
        updatePreviews();
      }
    });

    goBtn.addEventListener('click', () => {
      if (currentCueIndex < cues.length - 1) {
        currentCueIndex++;
        updatePreviews();
      }
    });

    blackoutBtn.addEventListener('click', () => {
      blackout = !blackout;
      const viewerWindow = window.open('', 'viewerWindow');
      if (viewerWindow) {
        viewerWindow.postMessage({ blackout }, '*');
      }
    });

    // Initialize with cue 0
    updatePreviews();
  </script>
</body>
</html>

